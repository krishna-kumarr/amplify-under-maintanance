version: 1
frontend:
  phases:
    preBuild:
      commands:
        - echo "Starting build in maintenance mode..."
        - npm run build:maintenance  # Build the app in maintenance mode
    build:
      commands:
        - echo "Build complete in maintenance mode."
    postBuild:
      commands:
        - echo "Disabling maintenance mode after build."
        - npm run build:normal  # Set normal mode after build, but do NOT run the build again
artifacts:
  baseDirectory: build
  files:
    - '**/*'
cache:
  paths:
    - node_modules/**/*
